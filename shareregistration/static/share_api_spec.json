{
    "swagger": "2.0",
    "info": {
        "version": "1.0.0",
        "title": "SHARE API Documentation",
        "description": "The SHARE API allows you to access all Research Release Events in the SHARE database and publish your organization's publications, data, repository holdings, or other research directly to SHARE.  The API has three endpoints.  “search,” “data,” and “stats.”  “search” allows you to access information in SHARE, “data” allows you to post to SHARE, and “stats” gives metrics on the different providers in SHARE.",
        "contact": {
            "name": "the Center for Open Science",
            "email": "share-support@osf.io",
            "url": "http://osf.io/share"
        }
    },
    "host": "staging.osf.io",
    "basePath": "/api/v1",
    "tags": [
        {
            "name": "SHARE",
            "description": "API endpoints"
        }
    ],
    "schemes": [
        "http",
        "https"
    ],
    "consumes": [
        "application/json"
    ],
    "produces": [
        "application/json"
    ],
    "paths": {
        "/share/search": {
            "get": {
                "description": "Normalized SHARE Data from all content providers",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "SHARE"
                ],
                "parameters": [
                    {
                        "name": "q",
                        "in": "query",
                        "description": "Any valid Lucene query string matching the SHARE schema",
                        "required": false,
                        "type": "string"
                    },
                    {
                        "name": "from",
                        "in": "query",
                        "description": "The starting index of the search. Indexing begins at 0.\nIf you set the size to 100, to page through the results,\nyou would increase your from by increments of 100. Defaults to 0.\n",
                        "required": false,
                        "type": "integer",
                        "format": "int32"
                    },
                    {
                        "name": "size",
                        "in": "query",
                        "description": "Determines the number of results returned at a time. Defaults to 10.",
                        "required": false,
                        "type": "integer",
                        "format": "int32"
                    },
                    {
                        "name": "sort",
                        "in": "query",
                        "description": "Determines what value the results are sorted on.\nIf not provided, it defaults to sorting based on the relevance\nscore computed by Elasticsearch.\n",
                        "required": false,
                        "type": "string",
                        "enum": [
                            "dateUpdated",
                            "Relevance"
                        ]
                    }
                ],
                "responses": {
                    "200": {
                        "description": "search response",
                        "schema": {
                            "$ref": "#/definitions/searchResults"
                        }
                    },
                    "default": {
                        "description": "unexpected error",
                        "schema": {
                            "$ref": "#/definitions/errorModel"
                        }
                    }
                }
            }
        },
        "/share/data": {
            "post": {
                "description": "POST endpoint for sending pre-formatted data to SHARE. Requires an API key - contact us at share-support@osf.io for more information.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "SHARE"
                ],
                "parameters": [
                    {
                        "name": "creationDate",
                        "in": "body",
                        "description": "Creation date of the research object.",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "name": "contributor",
                        "in": "body",
                        "description": "The people or organizations responsible for making contributions to an object. Each contributor is either a person or an institution.",
                        "required": true,
                        "type": "array",
                        "items": {
                            "$ref": "person",
                            "$ref": "institution"
                        }
                    },
                    {
                        "name": "description",
                        "in": "body",
                        "description": "A textual description of the resource.",
                        "required": false,
                        "type": "string"
                    },
                    {
                        "name": "directLink",
                        "required": true,
                        "in": "body",
                        "description": "A persistent HTTP URI that points to the research object.",
                        "type": "string",
                        "format": "uri"
                    },
                    {
                        "name": "releaseDate",
                        "in": "body",
                        "description": "The date of public release when the research object is freely available.",
                        "type": "string",
                        "format": "date"
                    },
                    {
                        "name": "releaseDate",
                        "in": "body",
                        "required": true,
                        "format": "date",
                        "type": "string",
                        "description": "The date of public release when the research object is freely available."
                    },
                    {
                        "name": "freeToRead",
                        "in": "body",
                        "description": "An object consisting of a date range specifying when this research object will be free to read.",
                        "object": "array",
                        "schema": {
                            "$ref": "freeToRead"
                        }
                    },
                    {
                        "name": "language",
                        "in": "body",
                        "type": "string",
                        "description": "The language of the resouce, in a 3 letter pattern",
                        "pattern": "[a-z][a-z][a-z]"
                    },
                    {
                        "name": "license",
                        "in": "body",
                        "description": "The licenses under which the object has been released. Can be an array of multiple liscenses.",
                        "type": "array",
                        "items": {
                            "$ref": "liscense"
                        }
                    },
                    {
                        "name": "contributor",
                        "in": "body",
                        "description": "The people or organizations responsible for making contributions to an object. Each contributor is either a person or an institution.",
                        "required": true,
                        "type": "array",
                        "items": {
                            "$ref": "person",
                            "$ref": "institution"
                        }
                    },
                    {
                        "name": "notificationLink",
                        "in": "body",
                        "required": true,
                        "type": "string",
                        "format": "uri",
                        "description": "The persistent HTTP URI at which the individual record of this research release event can be retrieved in the future. (Same as @id.)"
                    },
                    {
                        "name": "publisher",
                        "in": "body",
                        "type": "string",
                        "description": "This element contains the name of the entity, typically a 'publisher', responsible for making the version of record of the resource available. This could be a person, organisation or service"
                    },
                    {
                        "name": "raw",
                        "in": "body",
                        "required": true,
                        "type": "string",
                        "format": "uri",
                        "description": "The URL of the raw record either harvested or pushed to SHARE by the source. These raw records are provided exactly as it was delivered to SHARE, which means they are widely varying in format and content."
                    },
                    {
                        "name": "relation",
                        "in": "body",
                        "type": "array",
                        "description": "Related resources",
                        "items": {
                            "$ref": "relation"
                        }
                    },
                    {
                        "name": "resourceIdentifier",
                        "required": true,
                        "type": "string",
                        "in": "body",
                        "format": "uri",
                        "description": "An HTTP URI which unambiguously and persistently indicates the resource's identifier at a specific location."
                    },
                    {
                        "name": "revisionTime",
                        "type": "string",
                        "format": "date-time",
                        "in": "body",
                        "description": "The time this record was last revised by the provider"
                    },
                    {
                        "name": "sponsorship",
                        "type": "array",
                        "in": "body",
                        "description": "Sponsorships associated with the array. Can consist of an award, or a sponsoring organization.",
                        "items": {
                            "$ref": "sponsorship"
                        }
                    },
                    {
                        "name": "title",
                        "in": "body",
                        "description": "The title and any sub-titles of the resource.",
                        "type": "string"
                    },
                    {
                        "name": "version",
                        "in": "body",
                        "description": "This element indicates which 'version' of the resource is being described. While intended primarily for journal articles, it might be applicable to other types of resources as well.",
                        "type": "string",
                        "enum": [
                            "AO",
                            "SMUR",
                            "AM",
                            "P",
                            "VoR",
                            "CVoR",
                            "EVoR",
                            "NA"
                        ]
                    },
                    {
                        "name": "versionOfRecord",
                        "type": "string",
                        "in": "body",
                        "format": "uri",
                        "description": "This field MUST contain an HTTP URI which is a persistent identifier for the published version of the resource. If a DOI has been issued by the publisher then this MUST be used. Such a DOI MUST be represented as an HTTP URI."
                    },
                    {
                        "name": "otherProperties",
                        "type": "array",
                        "in": "body",
                        "description": "Structured or unstructured properties that don't fall into the general schema",
                        "items": {
                            "$ref": "otherProperties"
                        }
                    },
                    {
                        "name": "shareProperties",
                        "type": "object",
                        "in": "body",
                        "description": "Structured or unstructured properties that don't fall into the general schema, and are for SHARE general use",
                        "schema": {
                            "$ref": "shareProperties"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "post response",
                        "schema": {
                            "$ref": "#/definitions/result"
                        }
                    },
                    "default": {
                        "description": "unexpected error",
                        "schema": {
                            "$ref": "#/definitions/errorModel"
                        }
                    }
                }
            }
        },
        "/share/stats": {
            "get": {
                "description": "Elasticsearch aggregations of SHARE data, using the pre-beta metadata schema. Includes the results of the\npre-defined aggregations used to generate the dynaimic graphs on the\nSHARE Search page located on the OSF.\n This API endpoint returns metadata in an older version of the schema, so may not prove immedtiately useful for anyone looking for more than basic aggregations of the data, including source information.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "SHARE"
                ],
                "parameters": [
                    {
                        "name": "q",
                        "in": "query",
                        "description": "Any valid Lucene query string matching the SHARE schema",
                        "required": false,
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "stats response",
                        "schema": {
                            "$ref": "#/definitions/stats"
                        }
                    },
                    "default": {
                        "description": "unexpected error",
                        "schema": {
                            "$ref": "#/definitions/errorModel"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "searchResults": {
            "properties": {
                "count": {
                    "type": "integer",
                    "format": "int32",
                    "description": "The total number of results found for the current query."
                },
                "results": {
                    "$ref": "#/definitions/result"
                },
                "time": {
                    "type": "number",
                    "description": "The amount of time the search took to complete in seconds."
                }
            }
        },
        "result": {
            "properties": {
                "title": {
                    "type": "string",
                    "description": "This refers to the title, and any sub-titles,\nof the resource. The title should be represented using the original\nspelling and wording. If the resource really has no title, then this\nelement must still be supplied, though it may be empty\n"
                },
                "contributors": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "person": {
                                "$ref": "#/definitions/person"
                            },
                            "institution": {
                                "$ref": "#/definitions/institution"
                            }
                        }
                    }
                },
                "id": {
                    "$ref": "#/definitions/idComponents",
                    "type": "string"
                },
                "description": {
                    "type": "string",
                    "description": "An abstract or general description of the resource."
                },
                "tags": {
                    "type": "array",
                    "description": "A list of tags or keywords identified in the resource itself,\nnormalized to be all lower case.\n",
                    "items": {
                        "type": "string"
                    }
                },
                "source": {
                    "type": "string",
                    "description": "A string identifying where the resource came from."
                },
                "creationDate": {
                    "type": "string",
                    "description": "Creation date of the research object.",
                    "format": "date"
                },
                "directLink": {
                    "type": "string",
                    "description": "A persistent HTTP URI that points to the research object.",
                    "format": "uri"
                },
                "releaseDate": {
                    "type": "string",
                    "description": "The date of public release when the research object is freely available.",
                    "format": "date"
                },
                "freeToRead": {
                    "type": "object",
                    "description": "A date range specifying when this research object will be free to read.",
                    "properties": {
                        "startDate": {
                            "type": "string",
                            "format": "date",
                            "description": "The start date of the free to read period.\nIf the resource was always free to read, then this date can\nbe the same as creationDate or the date '0000-00-00'\n"
                        },
                        "endDate": {
                            "type": "string",
                            "format": "date",
                            "description": "The date on which this resource will no longer be free to read"
                        }
                    }
                },
                "language": {
                    "type": "string"
                },
                "licenseRef": {
                    "type": "array",
                    "description": "The licenses under which the research object is available",
                    "items": {
                        "type": "object",
                        "properties": {
                            "uri": {
                                "type": "string",
                                "format": "uri",
                                "description": "The HTTP URI of the license in effect during the period describe by this lincenseRef"
                            },
                            "startDate": {
                                "type": "string",
                                "format": "date",
                                "description": "The start date of the license period. If the resource was always licensed this way, then this date can be the same as creationDate or the date \\0000-00-00\\"
                            },
                            "endDate": {
                                "type": "string",
                                "format": "date",
                                "description": "The date on which this resource will no longer be licensed in this way."
                            }
                        }
                    }
                },
                "notificationLink": {
                    "type": "string",
                    "format": "uri",
                    "description": "The persistent HTTP URI at which the individual record of this\nresearch release event can be retrieved in the future.\n(Same as @id.)\n"
                },
                "publisher": {
                    "type": "string",
                    "description": "This element contains the name of the entity, typically a 'publisher',\nresponsible for making the version of record of the resource available.\nThis could be a person, organisation or service\n"
                },
                "raw": {
                    "type": "string",
                    "format": "uri",
                    "description": "The URL of the raw record either harvested or pushed to SHARE by the\nsource. These raw records are provided exactly as it was delivered to\nSHARE, which means they are widely varying in format and content.\n"
                },
                "relation": {
                    "type": "array",
                    "description": "Related resources",
                    "items": {
                        "type": "string",
                        "format": "uri",
                        "description": "An HTTP URI which points to a related resource."
                    }
                },
                "resourceIdentifier": {
                    "type": "string",
                    "format": "uri",
                    "description": "An HTTP URI which unambiguously and persistently indicates the\nresource's identifier at a specific location.\n"
                },
                "revisionTime": {
                    "type": "string",
                    "format": "date-time",
                    "description": "The time this record was last revised by the provider"
                },
                "sponsorship": {
                    "type": "array",
                    "description": "Sponsorships associated with the array",
                    "items": {
                        "$ref": "#/definitions/sponsorship"
                    }
                },
                "version": {
                    "type": "string",
                    "description": "This element indicates which 'version' of the resource is being\ndescribed. While intended primarily for journal articles, it might\nbe applicable to other types of resources as well.\ntype: \"string\"\n",
                    "enum": [
                        "AO",
                        "SMUR",
                        "AM",
                        "P",
                        "VoR",
                        "CVoR",
                        "EVoR",
                        "NA"
                    ]
                },
                "versionOfRecord": {
                    "type": "string",
                    "format": "uri",
                    "description": "This field MUST contain an HTTP URI which is a persistent identifier\nfor the published version of the resource. If a DOI has been issued\nby the publisher then this MUST be used. Such a DOI MUST be\nrepresented as an HTTP URI.\n"
                },
                "otherProperties": {
                    "type": "object"
                },
                "shareProperties": {
                    "type": "object",
                    "properties": {
                        "collectionDateTime": {
                            "type": "string",
                            "format": "date-time"
                        }
                    }
                }
            }
        },
        "sponsorship": {
            "type": "object",
            "description": "A sponsorship associated with the resource.",
            "properties": {
                "award": {
                    "$ref": "#/definitions/award"
                },
                "sponsor": {
                    "$ref": "#/definitions/sponsor"
                }
            }
        },
        "award": {
            "description": "The award made to support the creation of the resource.",
            "properties": {
                "awardName": {
                    "type": "string",
                    "description": "The textual representation of the award identifier, issued by the sponsor, that relates to the resource."
                },
                "awardIdentifier": {
                    "type": "string",
                    "format": "uri",
                    "description": "An HTTP URI for the award, issued by the sponsor, that relates to the resource."
                }
            }
        },
        "sponsor": {
            "type": "object",
            "description": "This describes the sponsor of the resource.",
            "properties": {
                "sponsorName": {
                    "description": "The name of the entity responsible for sponsoring the resource, recorded here as text.",
                    "type": "string"
                },
                "sponsorIdentifier": {
                    "type": "string",
                    "format": "uri",
                    "description": "A globally unique identifier for the sponsor of the resource should be recorded here."
                }
            }
        },
        "shareProperties": {
            "type": "object",
            "properties": {
                "collectionDateTime": {
                    "description": "Date time the resource was collected by SHARE",
                    "type": "string",
                    "format": "date-time"
                },
                "moreProperties": {
                    "description": "Other properties gathered for SHARE",
                    "type": "string"
                }
            }
        },
        "otherProperties": {
            "type": "object",
            "properties": {
                "moreProperties": {
                    "description": "Other properties gathered that do not fit into the main schema",
                    "type": "string"
                }
            }
        },
        "liscense": {
            "type": "array",
            "description": "The licenses under which the research object is available",
            "items": {
                "type": "object",
                "properties": {
                    "uri": {
                        "type": "string",
                        "format": "uri",
                        "description": "The HTTP URI of the license in effect during the period describe by this lincenseRef"
                    },
                    "startDate": {
                        "type": "string",
                        "format": "date",
                        "description": "The start date of the license period. If the resource was always licensed this way, then this date can be the same as creationDate or the date \\0000-00-00\\"
                    },
                    "endDate": {
                        "type": "string",
                        "format": "date",
                        "description": "The date on which this resource will no longer be licensed in this way."
                    }
                }
            }
        },
        "freeToRead": {
            "type": "object",
            "description": "A date range specifying when this research object will be free to read.",
            "properties": {
                "uri": {
                    "type": "string",
                    "format": "uri",
                    "description": "The HTTP URI of the license in effect during the period describe by this lincenseRef"
                },
                "startDate": {
                    "type": "string",
                    "format": "date",
                    "description": "The start date of the free to read period"
                },
                "endDate": {
                    "type": "string",
                    "format": "date",
                    "description": "The date on which this resource will no longer be free to read."
                }
            }
        },
        "relation": {
            "type": "string",
            "format": "uri",
            "description": "An HTTP URI which points to a related resource."
        },
        "person": {
            "type": "object",
            "description": "A person that is a contributor to the research object",
            "properties": {
                "name": {
                    "type": "string",
                    "description": "Name of the person. May be blank"
                },
                "given": {
                    "type": "string",
                    "description": "The first name of the contributor."
                },
                "suffix": {
                    "type": "string",
                    "description": "The suffix of the contributor."
                },
                "familyName": {
                    "type": "string",
                    "description": "Also called the 'last name,' this element will be derived\nfrom the creator.name by SHARE if not supplied by the source.\n"
                },
                "additionalName": {
                    "type": "string",
                    "description": "Also called the \"middle name,\" this element will be\nderived from the creator.name by SHARE if not supplied by the source.\n"
                },
                "prefix": {
                    "type": "string",
                    "description": "The prefix of the contributor."
                },
                "affiliation": {
                    "type": "string",
                    "description": "An organization that this person is affiliated with. For example,\na school/university.\n"
                },
                "email": {
                    "type": "string",
                    "description": "An email address for this person"
                },
                "sameAs": {
                    "description": "Identifiers that describe this person",
                    "type": "array",
                    "items": {
                        "type": "string",
                        "format": "uri",
                        "description": "A single HTTP URI that describes this person"
                    }
                }
            }
        },
        "institution": {
            "type": "object",
            "description": "An institution that is a contributor to the research object",
            "properties": {
                "name": {
                    "description": "Name of the organization. May be blank",
                    "type": "string"
                },
                "sameAs": {
                    "type": "array",
                    "description": "Identifiers that describe this organization",
                    "items": {
                        "type": "string",
                        "format": "uri",
                        "description": "A single HTTP URI that describes this institution"
                    }
                },
                "email": {
                    "type": "string",
                    "format": "uri",
                    "description": "an email address for this institution"
                }
            }
        },
        "idComponents": {
            "type": "object",
            "properties": {
                "url": {
                    "type": "string",
                    "description": "A URL linking back to the original resource."
                },
                "serviceID": {
                    "type": "string",
                    "description": "A unique identifier for the resource, originting from the\noriginal source.\n"
                },
                "doi": {
                    "type": "string",
                    "description": "A DOI for the resource."
                }
            }
        },
        "stats": {
            "type": "object",
            "properties": {
                "raw_aggregations": {
                    "$ref": "#/definitions/raw_aggregation"
                },
                "charts": {
                    "$ref": "#/definitions/chart"
                }
            }
        },
        "raw_aggregation": {
            "type": "object",
            "properties": {
                "sources": {
                    "$ref": "#/definitions/sourceComponents"
                },
                "earlier_documents": {
                    "$ref": "#/definitions/aggregatedSourceComponents"
                },
                "doisMissing": {
                    "$ref": "#/definitions/aggregatedSourceComponents"
                },
                "date_chunks": {
                    "$ref": "#/definitions/date_chunk"
                },
                "dois": {
                    "$ref": "#/definitions/aggregatedSourceComponents"
                }
            }
        },
        "chart": {
            "type": "object",
            "properties": {
                "shareTimeGraph": {
                    "$ref": "#/definitions/shareTimeGraphComponent"
                },
                "shareDonutGraph": {
                    "$ref": "#/definitions/shareDonutGraphComponent"
                }
            }
        },
        "sourceComponents": {
            "type": "object",
            "properties": {
                "buckets": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/bucket"
                    }
                },
                "sum_other_doc_count": {
                    "type": "integer",
                    "format": "int32"
                },
                "doc_count_error_upper_bound": {
                    "type": "integer",
                    "format": "int32"
                }
            }
        },
        "bucket": {
            "properties": {
                "key": {
                    "type": "string",
                    "description": "The official short name of each data source."
                },
                "doc_count": {
                    "type": "integer",
                    "format": "int32",
                    "description": "The total number of documents for that source."
                }
            }
        },
        "aggregatedSourceComponents": {
            "properties": {
                "sources": {
                    "$ref": "#/definitions/sourceComponents"
                },
                "doc_count": {
                    "type": "integer",
                    "format": "int32",
                    "description": "The total number of documents in this aggregation."
                }
            }
        },
        "date_chunk": {
            "properties": {
                "buckets": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/timeBuckets"
                    }
                }
            }
        },
        "timeBuckets": {
            "properties": {
                "articles_over_time": {
                    "$ref": "#/definitions/timeBucket"
                },
                "key": {
                    "type": "string",
                    "description": "The official short name of each data source."
                },
                "doc_count": {
                    "type": "integer",
                    "format": "int32",
                    "description": "The total number of documents for that source."
                }
            }
        },
        "timeBucket": {
            "properties": {
                "key_as_string": {
                    "type": "string",
                    "description": "The date for the time period represented as a string."
                },
                "key": {
                    "type": "integer",
                    "format": "int32",
                    "description": "The date for the time period represented as a string."
                },
                "doc_count": {
                    "type": "integer",
                    "format": "int32",
                    "description": "The date for the time period represented as an integer."
                }
            }
        },
        "shareTimeGraphComponent": {
            "properties": {
                "x": {
                    "type": "string",
                    "description": "The label for the x axis."
                },
                "colors": {
                    "$ref": "#/definitions/color"
                },
                "type": {
                    "type": "string",
                    "description": "T type of graph that C3 should render."
                },
                "groups": {
                    "type": "array",
                    "items": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    }
                },
                "columns": {
                    "type": "array",
                    "items": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "color": {
            "properties": {
                "source": {
                    "type": "string",
                    "description": "A hex color matched to each source in the graph."
                }
            }
        },
        "shareDonutGraphComponent": {
            "properties": {
                "colors": {
                    "$ref": "#/definitions/color"
                },
                "type": {
                    "type": "string",
                    "description": "T type of graph that C3 should render."
                },
                "columns": {
                    "type": "array",
                    "items": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "errorModel": {
            "required": [
                "code",
                "message"
            ],
            "properties": {
                "code": {
                    "type": "integer",
                    "format": "int32"
                },
                "message": {
                    "type": "string"
                }
            }
        }
    }
}
